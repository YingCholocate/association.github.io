{"version":3,"file":"static/js/410.9222b6ea.chunk.js","mappings":"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","sources":["api/request.ts","api/tuiwen.ts","webpack://association/./src/components/Upload.module.css?d5d6","components/Upload.tsx","pages/sandbox/publicresource/shuzi.tsx","utils/commonurl.ts"],"sourcesContent":["/**\n * 封装axios\n */\nimport axios from 'axios';\nimport { message } from 'antd';\nimport { mockurl } from '@/utils/commonurl';\n\n// 定义常见的错误信息\nconst TOKEN_ERROR = 'Token认证失败，请重新登录';\nconst NETWORK_ERROR = '网络异常，请检查网络后重试';\n\n// BASEURL 定义可以同时请求多个端口号\nconst BASEURL = 'http://localhost:3000';\n\n// 创建axios实例对象，添加全局配置\nconst service = axios.create({\n  baseURL: BASEURL,\n  timeout: 8000, // 请求超时时间\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// 请求拦截\nservice.interceptors.request.use((config: any) => {\n  // 在请求发送前进行验证\n\n  const { headers } = config;\n\n  encodeURIComponent(config.params);\n  // 添加token之类的东西\n  const token = localStorage.getItem('token');\n\n  if (token) {\n    headers!.common.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});\n\n// 响应拦截\nservice.interceptors.response.use((config) => {\n  const { status, data } = config;\n  const mockurl1 = '/mock';\n  if (status === 200) {\n    if (mockurl.match(mockurl1) !== null) {\n      return data;\n    }\n    return { data };\n  } else if (status === 1005) {\n    // 和后台约定的，Token过期，code是1005\n    message.error(TOKEN_ERROR);\n    return Promise.reject(TOKEN_ERROR);\n  } else {\n    message.error(NETWORK_ERROR);\n    return Promise.reject(NETWORK_ERROR);\n  }\n});\n\n// 请求核心函数，options 请求配置\nfunction request(options) {\n  // eslint-disable-next-line no-param-reassign\n  options.method = options.method || 'get'; // 如果是get请求的话，则将data中的数据转移到params中\n  if (options.method.toLowerCase() === 'get') {\n    // eslint-disable-next-line no-param-reassign\n    options.params = options.data;\n  }\n\n  if (process.env.NODE_ENV === 'production') {\n    // 在正式环境中，不管有没有开启moke开关，都使用正式环境base_url，以防万一\n    service.defaults.baseURL = process.env.BASEURL;\n  } else {\n    // VUE_APP_MOCK为1，代表开启moke模式\n    service.defaults.baseURL =\n      process.env.VUE_APP_MOCK === '1'\n        ? process.env.VUE_APP_MOCK_API\n        : process.env.VUE_APP_BASE_API;\n  }\n\n  return service(options);\n}\n/**\n * 可以通过 request.get() 方式调用\n */\n['get', 'post', 'put', 'delete', 'patch'].forEach((item) => {\n  request[item] = (url, data, options) => {\n    return request({\n      method: item,\n      url,\n      data,\n      ...options,\n    });\n  };\n});\n\n// export default request;\nexport default service;\n","import request from './request';\nimport { mockurl } from '@/utils/commonurl';\n\nexport interface ITuiwen {\n  type: number;\n  id: number;\n  method: string;\n}\n\nexport interface IArticle {\n  id: number;\n  link: string;\n  title: string;\n  uploadtime: string;\n}\n// 删除推文\nexport const deleteTuiwen = (data: ITuiwen) => {\n  return request.post(`${mockurl}/resourcedata`, data);\n};\n\n// 获取推文\nexport const getTuiwen = (num: number) => {\n  return request.get(`${mockurl}/resourcedata`, { params: { type: 1, currentPage: num } });\n};\n\n// 增添推文\nexport const addTuiwen = (data) => {\n  return request.post(`${mockurl}/resourcedata`, data);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"active\":\"Upload_active__4+OHo\",\"contentStyles\":\"Upload_contentStyles__DWM+U\",\"contenttitle\":\"Upload_contenttitle__zFomX\",\"steps-action\":\"Upload_steps-action__4RbGI\",\"stepsAction\":\"Upload_stepsAction__t9L4F\",\"submitstyle\":\"Upload_submitstyle__WRzww\"};","import React, { useState } from 'react';\nimport { Steps, Button, message, Radio, Form, Input } from 'antd';\nimport style from './Upload.module.css';\nimport { useNavigate } from 'react-router-dom';\nimport { addTuiwen } from '@/api/tuiwen';\n\nconst { Step } = Steps;\nconst steps = [\n  {\n    title: 'First',\n    content: '选择要上传的类型',\n  },\n  {\n    title: 'Second',\n    content: '输入',\n  },\n];\nconst datatype = [\n  {\n    department: 'Mishu',\n    content: '推文',\n  },\n  {\n    department: 'Mishu',\n    content: '资料文件',\n  },\n];\nexport default function Upload(props) {\n  const navigate = useNavigate();\n  const [current, setCurrent] = useState(0);\n  const [, setcheckedvalue] = useState('');\n  const [type, settype] = useState(props.type);\n  const next = () => {\n    setCurrent(current + 1);\n  };\n\n  const prev = () => {\n    setCurrent(current - 1);\n  };\n  const onChange = (e) => {\n    setcheckedvalue(() => e.target.value);\n    // console.log(`radio checked:${e.target.value}`);\n    if (type === 'mishu' && e.target.value === '推文') {\n      settype(1);\n    } else if (type === 'mishu' && e.target.value === '资料文件') {\n      settype(4);\n    }\n  };\n  const handleSubmit = (values) => {\n    const date = new Date();\n    addTuiwen({\n      link: values.link,\n      title: values.title,\n      uploadtime: `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`.toString(),\n      type,\n      method: 'add',\n    })\n      .then(() => {\n        message.success('上传成功');\n        setTimeout(() => {\n          navigate('/');\n        }, 2000);\n      })\n      .catch(() => {\n        const data = {\n          link: values.link,\n          title: values.title,\n          uploadtime: `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`.toString(),\n          type,\n          id: 0,\n          method: 'add',\n        };\n        // console.log(data);\n        // console.log(type);\n        // localStorage.setItem()\n        localStorage.setItem(`type${type}`, JSON.stringify(data));\n\n        message.success('上传成功');\n        setTimeout(() => {\n          navigate('/');\n        }, 2000);\n      });\n  };\n  // 根据current的值返回对应的组件\n  const currentElement: any = () => {\n    if (current === 0) {\n      return (\n        <Radio.Group onChange={onChange}>\n          {type === 'mishu' || type === 1 || type === 4 ? (\n            datatype.map((item) => (\n              <Radio.Button key={item.content} value={item.content}>\n                {item.content}\n              </Radio.Button>\n            ))\n          ) : (\n            <Radio.Button value={datatype[1].content}>{datatype[1].content}</Radio.Button>\n          )}\n        </Radio.Group>\n      );\n    } else if (current === 1) {\n      return (\n        <Form onFinish={handleSubmit}>\n          <Form.Item\n            label=\"链接\"\n            name=\"link\"\n            rules={[{ required: true, message: 'Please input your link!' }]}\n          >\n            <Input placeholder=\"input 链接\" />\n          </Form.Item>\n          <Form.Item\n            label=\"标题\"\n            name=\"title\"\n            rules={[{ required: true, message: 'Please input your title!' }]}\n          >\n            <Input placeholder=\"input 文章标题\" />\n          </Form.Item>\n          <Form.Item>\n            <Button type=\"primary\" className={style.submitstyle} htmlType=\"submit\">\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n      );\n    } else {\n      return '';\n    }\n  };\n  return (\n    <>\n      <Steps current={current}>\n        {steps.map((item) => (\n          <Step key={item.title} title={item.title} />\n        ))}\n      </Steps>\n      <div className=\"contentStyles\">\n        <div className={style.contenttitle}>{steps[current].content}</div>\n        <div className=\"contenthore\">{currentElement()}</div>\n      </div>\n\n      <div className={style.stepsAction}>\n        {current < steps.length - 1 && (\n          <Button type=\"primary\" onClick={() => next()}>\n            Next\n          </Button>\n        )}\n        {current > 0 && (\n          <Button className={style.previesStyle} onClick={() => prev()}>\n            Previous\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport Upload from '../../../components/Upload';\n\nexport default function Shuzi() {\n  return <Upload type=\"2\" />;\n}\n","export const mockurl = '/mock';\n// '/mock';\n// '/association';\n"],"names":["TOKEN_ERROR","NETWORK_ERROR","service","axios","baseURL","timeout","headers","request","options","method","toLowerCase","params","data","defaults","process","BASEURL","interceptors","use","config","encodeURIComponent","token","localStorage","getItem","common","Authorization","response","status","mockurl","message","Promise","reject","forEach","item","url","deleteTuiwen","getTuiwen","num","type","currentPage","addTuiwen","Step","Steps","steps","title","content","datatype","department","Upload","props","navigate","useNavigate","useState","current","setCurrent","setcheckedvalue","settype","onChange","e","target","value","handleSubmit","values","date","Date","link","uploadtime","getFullYear","getMonth","getDate","toString","then","setTimeout","catch","id","setItem","JSON","stringify","map","className","style","onFinish","label","name","rules","required","placeholder","htmlType","length","onClick","Shuzi"],"sourceRoot":""}